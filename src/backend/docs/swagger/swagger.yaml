basePath: /api/v1
definitions:
  models.CreateFamilyRequest:
    properties:
      description:
        description: 家庭描述，可选
        example: 温馨的家庭
        maxLength: 500
        type: string
      name:
        description: 家庭名称
        example: 张家的厨房
        maxLength: 100
        type: string
    required:
    - name
    type: object
  models.FamilyInfoResponse:
    properties:
      description:
        example: 温馨的家庭
        type: string
      dish_count:
        example: 15
        type: integer
      family_id:
        example: 1
        type: integer
      max_dishes:
        example: 30
        type: integer
      member_count:
        example: 3
        type: integer
      name:
        example: 张家的厨房
        type: string
      owner_id:
        example: 1001
        type: integer
    type: object
  models.FamilyInviteRequest:
    properties:
      action:
        example: accept
        type: string
      family_id:
        example: 1
        type: integer
      family_name:
        example: 张家的厨房
        type: string
      inviter_id:
        example: 1001
        type: integer
      inviter_nickname:
        example: 张三
        type: string
    required:
    - action
    - family_id
    - family_name
    - inviter_id
    - inviter_nickname
    type: object
  models.FamilyJoinResponse:
    properties:
      family_id:
        example: 1
        type: integer
      joined_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      member_role:
        example: member
        type: string
    type: object
  models.FamilyMemberInfo:
    properties:
      avatar:
        example: https://.../avatar.jpg
        type: string
      joined_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      nickname:
        example: 李四
        type: string
      role:
        example: member
        type: string
      user_id:
        example: 1002
        type: integer
    type: object
  models.FamilyResponse:
    properties:
      description:
        example: 温馨的家庭
        type: string
      family_id:
        example: 1
        type: integer
      max_dishes:
        example: 30
        type: integer
      member_count:
        example: 1
        type: integer
      name:
        example: 张家的厨房
        type: string
    type: object
  models.LoginRequest:
    description: 用户登录请求参数
    properties:
      password:
        description: 密码
        example: password123
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        type: string
    required:
    - password
    - phone
    type: object
  models.LoginResponse:
    description: 用户登录成功返回的数据
    properties:
      expires_in:
        description: Token过期时间（秒）
        example: 86400
        type: integer
      token:
        description: JWT Token
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      user_id:
        description: 用户ID
        example: 1
        type: integer
    type: object
  models.MembershipInfo:
    description: 用户会员信息
    properties:
      expires_at:
        description: 到期时间，免费版为null
        example: "2024-12-31T23:59:59Z"
        type: string
      type:
        description: 会员类型：free-免费版，premium-付费版
        example: free
        type: string
    type: object
  models.RegisterRequest:
    description: 用户注册请求参数
    properties:
      nickname:
        description: 昵称
        example: 张三
        type: string
      password:
        description: 密码，至少6位
        example: password123
        minLength: 6
        type: string
      phone:
        description: 手机号，11位数字
        example: "13800138000"
        type: string
      verify_code:
        description: 验证码，6位数字
        example: "123456"
        type: string
    required:
    - nickname
    - password
    - phone
    - verify_code
    type: object
  models.RegisterResponse:
    description: 用户注册成功返回的数据
    properties:
      token:
        description: JWT Token
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      user_id:
        description: 用户ID
        example: 1
        type: integer
    type: object
  models.UserInfoResponse:
    description: 用户信息返回数据
    properties:
      avatar:
        description: 头像URL
        example: https://...
        type: string
      membership:
        allOf:
        - $ref: '#/definitions/models.MembershipInfo'
        description: 会员信息
      nickname:
        description: 昵称
        example: 张三
        type: string
      phone:
        description: 手机号
        example: "13800138000"
        type: string
      user_id:
        description: 用户ID
        example: 1
        type: integer
    type: object
  utils.FieldError:
    description: 字段验证错误信息
    properties:
      field:
        description: 错误字段名
        example: phone
        type: string
      message:
        description: 错误消息
        example: 手机号格式不正确
        type: string
    type: object
  utils.Response:
    description: 统一的API响应格式
    properties:
      code:
        description: 响应状态码
        example: 200
        type: integer
      data:
        description: 响应数据
      errors:
        description: 字段错误列表（仅在错误时返回）
        items:
          $ref: '#/definitions/utils.FieldError'
        type: array
      message:
        description: 响应消息
        example: success
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@onetastefamily.com
    name: API Support
    url: http://www.onetastefamily.com/support
  description: 家庭饮食管理系统的后端API接口文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: OneTaste Family API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: 用户登录接口，支持手机号和密码登录。登录成功后返回用户ID、JWT Token和过期时间。
      parameters:
      - description: 登录请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.LoginResponse'
              type: object
        "400":
          description: 手机号或密码错误
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 用户登录
      tags:
      - 用户认证
  /auth/register:
    post:
      consumes:
      - application/json
      description: 用户注册接口，支持手机号、密码、验证码、昵称注册。注册成功后返回用户ID和JWT Token。
      parameters:
      - description: 注册请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 注册成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.RegisterResponse'
              type: object
        "400":
          description: 请求参数错误、验证码错误或手机号已注册
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      summary: 用户注册
      tags:
      - 用户认证
  /family/create:
    post:
      consumes:
      - application/json
      description: 创建一个新的家庭，创建者自动成为owner并加入家庭。需要Bearer Token认证。
      parameters:
      - description: 创建家庭请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.CreateFamilyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.FamilyResponse'
              type: object
        "400":
          description: 请求参数错误或已加入家庭
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: 未授权或Token无效
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 创建家庭
      tags:
      - 家庭
  /family/info:
    get:
      consumes:
      - application/json
      description: 获取当前用户所属家庭信息，包括成员数量与菜式数量。需要Bearer Token认证。
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.FamilyInfoResponse'
              type: object
        "401":
          description: 未授权或Token无效
          schema:
            $ref: '#/definitions/utils.Response'
        "404":
          description: 尚未创建或加入家庭
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 获取家庭信息
      tags:
      - 家庭
  /family/member/invite:
    post:
      consumes:
      - application/json
      description: 用户在前端点击“同意”后调用该接口，加入邀请人所在家庭。需要Bearer Token认证。
      parameters:
      - description: 扫码加入家庭请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.FamilyInviteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 加入成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.FamilyJoinResponse'
              type: object
        "400":
          description: 参数错误或业务限制
          schema:
            $ref: '#/definitions/utils.Response'
        "401":
          description: 未授权或Token无效
          schema:
            $ref: '#/definitions/utils.Response'
        "404":
          description: 家庭不存在或邀请无效
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 扫码加入家庭
      tags:
      - 家庭
  /family/members:
    get:
      consumes:
      - application/json
      description: 返回当前用户所属家庭的成员列表。需要Bearer Token认证。
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.FamilyMemberInfo'
                  type: array
              type: object
        "401":
          description: 未授权或Token无效
          schema:
            $ref: '#/definitions/utils.Response'
        "404":
          description: 尚未创建或加入家庭
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 获取家庭成员列表
      tags:
      - 家庭
  /health:
    get:
      consumes:
      - application/json
      description: 检查服务是否正常运行
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 健康检查
      tags:
      - 系统
  /user/info:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的基本信息和会员状态。需要Bearer Token认证。
      produces:
      - application/json
      responses:
        "200":
          description: 获取成功
          schema:
            allOf:
            - $ref: '#/definitions/utils.Response'
            - properties:
                data:
                  $ref: '#/definitions/models.UserInfoResponse'
              type: object
        "401":
          description: 未授权或Token无效
          schema:
            $ref: '#/definitions/utils.Response'
        "404":
          description: 用户不存在
          schema:
            $ref: '#/definitions/utils.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/utils.Response'
      security:
      - BearerAuth: []
      summary: 获取用户信息
      tags:
      - 用户
securityDefinitions:
  BearerAuth:
    description: 使用 "Bearer {token}" 格式，token 通过登录接口获取
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
